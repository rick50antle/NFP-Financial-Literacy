<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Net Asset Categories - NFP Financial Literacy</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background-color: #f5f1e8;
      color: #5c4d3d;
    }

    html, body, #root {
      width: 100%;
      height: 100%;
    }

    .container {
      min-height: 100vh;
      background-color: #f5f1e8;
      font-family: 'Inter', system-ui, sans-serif;
    }

    header {
      background-color: #00356b;
      color: white;
      padding: 1.5rem;
      text-align: center;
    }

    .header-title {
      cursor: pointer;
      user-select: none;
    }

    header h1 {
      margin: 0 0 0.25rem 0;
      font-size: 1.5rem;
      font-weight: 700;
    }

    header p {
      margin: 0;
      font-size: 0.85rem;
      opacity: 0.9;
    }

    .dev-phase-buttons {
      margin-top: 1rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
    }

    .dev-phase-button {
      padding: 0.4rem 0.8rem;
      font-size: 0.75rem;
      font-weight: 500;
      background-color: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 3px;
      cursor: pointer;
      font-family: 'Inter', system-ui, sans-serif;
      transition: all 0.2s ease;
    }

    .dev-phase-button:hover {
      background-color: rgba(255, 255, 255, 0.3);
    }

    .dev-phase-button.active {
      background-color: #c9a227;
      border-color: #c9a227;
      font-weight: 600;
    }

    .progress-bar {
      background-color: #c4a574;
      height: 6px;
      width: 100%;
    }

    .progress-fill {
      background-color: #c9a227;
      height: 100%;
      transition: width 0.3s ease;
    }

    .top-action-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background-color: #e8dcc8;
      border-bottom: 1px solid #d4c4a8;
      gap: 1rem;
    }

    .button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background-color: #00356b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .button:hover {
      opacity: 0.9;
    }

    .button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .button.primary {
      background-color: #00356b;
    }

    .button.accent {
      background-color: #c9a227;
    }

    .button.earth {
      background-color: #8b7355;
    }

    .button.outline {
      background-color: transparent;
      border: 2px solid #00356b;
      color: #00356b;
    }

    .button.outline:hover {
      background-color: rgba(0, 53, 107, 0.1);
    }

    .glossary-panel {
      padding: 1.5rem;
      background-color: #e8dcc8;
      border-bottom: 2px solid #c9a227;
    }

    .glossary-panel h3 {
      color: #00356b;
      margin-top: 0;
    }

    .glossary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .glossary-item p:first-child {
      font-weight: 600;
      color: #5c4d3d;
      margin: 0 0 0.5rem 0;
    }

    .glossary-item p {
      margin: 0;
      font-size: 0.9rem;
      color: #8b7355;
      line-height: 1.6;
    }

    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .content h2 {
      color: #00356b;
      margin-top: 0;
    }

    .content p {
      font-size: 1.1rem;
      color: #5c4d3d;
      line-height: 1.6;
    }

    .content ul {
      color: #8b7355;
      line-height: 1.8;
      font-size: 1rem;
    }

    .ai-note {
      background-color: #f0fdf4;
      border: 1px solid #22c55e;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1.5rem;
    }

    .ai-note button {
      width: 100%;
      padding: 1rem;
      text-align: left;
      background-color: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1rem;
      font-weight: 600;
      color: #22c55e;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .ai-note p {
      margin: 1rem 0 0 0;
      font-size: 0.9rem;
      color: #8b7355;
      line-height: 1.6;
    }

    .begin-button {
      margin-top: 2rem;
      padding: 0.75rem 2rem;
      background-color: #c9a227;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .dev-mode-notice {
      margin-top: 2rem;
      padding: 1rem;
      background-color: #fffbeb;
      border-radius: 4px;
    }

    .dev-mode-notice p {
      margin: 0;
      color: #dc2626;
      font-weight: 600;
    }

    .dev-mode-notice p:last-child {
      margin: 0.5rem 0 0 0;
      font-size: 0.9rem;
      color: #8b7355;
    }

    .question-box {
      background-color: white;
      border: 2px solid #c4a574;
      border-radius: 4px;
      padding: 1.5rem;
      margin-top: 1rem;
      margin-bottom: 1.5rem;
    }

    .question-box p:first-child {
      font-weight: 600;
      color: #00356b;
      margin: 0 0 1rem 0;
    }

    .sub-category {
      display: grid;
      gap: 1rem;
    }

    .sub-category-item {
      padding-left: 1rem;
      border-left: 3px solid #c9a227;
    }

    .sub-category-item p:first-child {
      margin: 0 0 0.25rem 0;
      font-weight: 500;
      color: #5c4d3d;
    }

    .sub-category-item p:last-child {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 700;
      color: #00356b;
    }

    .total-line {
      margin: 1.5rem 0 0 0;
      font-size: 0.9rem;
      color: #8b7355;
    }

    input[type="text"],
    textarea {
      padding: 0.75rem;
      font-size: 1rem;
      border: 2px solid #d4c4a8;
      border-radius: 4px;
      width: 100%;
      font-family: 'Inter', system-ui, sans-serif;
      resize: vertical;
    }

    input[type="text"]:disabled,
    textarea:disabled {
      background-color: #f0fdf4;
      opacity: 0.7;
    }

    .input-label {
      color: #5c4d3d;
      font-size: 0.9rem;
      margin: 0 0 1rem 0;
    }

    .check-button {
      margin-top: 1rem;
      padding: 0.75rem 2rem;
      background-color: #00356b;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .check-button:hover {
      opacity: 0.9;
    }

    .success-message {
      margin-top: 1rem;
      padding: 1rem;
      background-color: #f0fdf4;
      border-radius: 4px;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }

    .success-icon {
      margin-top: 0.2rem;
      flex-shrink: 0;
      color: #22c55e;
      font-size: 1.5rem;
    }

    .success-message p:first-child {
      margin: 0 0 0.75rem 0;
      font-weight: 600;
      color: #22c55e;
    }

    .success-message p:last-child {
      margin: 0;
      color: #8b7355;
      line-height: 1.6;
    }

    .error-message {
      margin-top: 1rem;
      padding: 1rem;
      background-color: #fef2f2;
      border-radius: 4px;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }

    .error-icon {
      margin-top: 0.2rem;
      flex-shrink: 0;
      color: #dc2626;
      font-size: 1.5rem;
    }

    .error-message p:first-child {
      margin: 0 0 0.5rem 0;
      font-weight: 600;
      color: #dc2626;
    }

    .error-message p:last-child {
      margin: 0;
      color: #8b7355;
      line-height: 1.6;
      font-size: 0.9rem;
    }

    .warning-message {
      margin-top: 1rem;
      padding: 1rem;
      background-color: #fffbeb;
      border-radius: 4px;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }

    .warning-icon {
      margin-top: 0.2rem;
      flex-shrink: 0;
      color: #f59e0b;
      font-size: 1.5rem;
    }

    .warning-message p:first-child {
      margin: 0 0 0.5rem 0;
      font-weight: 600;
      color: #f59e0b;
    }

    .warning-message p:last-child {
      margin: 0;
      color: #8b7355;
      line-height: 1.6;
      font-size: 0.9rem;
    }

    .hint-button {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      background-color: #00356b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .hint-button + .hint-button {
      margin-left: 0.5rem;
    }

    .option-button {
      padding: 1rem;
      text-align: left;
      border: 2px solid #d4c4a8;
      background-color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      color: #8b7355;
      font-family: 'Inter', system-ui, sans-serif;
      transition: all 0.2s ease;
    }

    .option-button:hover:not(:disabled) {
      border-color: #c9a227;
    }

    .option-button:disabled {
      cursor: default;
    }

    .option-button p {
      margin: 0;
    }

    .option-button p:first-child {
      font-weight: 600;
      color: #5c4d3d;
    }

    .option-button p:last-child {
      margin: 0.5rem 0 0 0;
      font-size: 0.9rem;
      color: #8b7355;
    }

    .next-button {
      margin-top: 2rem;
      padding: 0.75rem 2rem;
      background-color: #c9a227;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .completion-container {
      text-align: center;
    }

    .trophy {
      margin-bottom: 2rem;
      font-size: 4rem;
    }

    .completion-box {
      background-color: white;
      border: 2px solid #c4a574;
      border-radius: 4px;
      padding: 2rem;
      margin-top: 2rem;
      margin-bottom: 2rem;
      text-align: left;
    }

    .completion-box h3 {
      color: #00356b;
      margin-top: 0;
    }

    .completion-box ol {
      color: #8b7355;
      line-height: 1.8;
    }

    .completion-box ol li {
      margin-bottom: 0.5rem;
    }

    .next-tutorial-box {
      background-color: #e8dcc8;
      border: 2px solid #c4a574;
      border-radius: 4px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .next-tutorial-box h3 {
      color: #00356b;
      margin-top: 0;
    }

    .next-tutorial-box p {
      color: #8b7355;
      line-height: 1.6;
      margin: 0;
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .button-group button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      font-family: 'Inter', system-ui, sans-serif;
    }

    .dev-navigator {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background-color: #fffbeb;
      border: 2px solid #f59e0b;
      border-radius: 4px;
      padding: 1rem;
      max-width: 250px;
      font-size: 0.85rem;
      z-index: 1000;
    }

    .dev-navigator p {
      font-weight: 600;
      color: #dc2626;
      margin: 0 0 0.75rem 0;
    }

    .dev-nav-grid {
      display: grid;
      gap: 0.5rem;
    }

    .dev-nav-button {
      padding: 0.5rem;
      background-color: white;
      border: none;
      border-radius: 2px;
      cursor: pointer;
      color: #8b7355;
      font-weight: 400;
      font-family: 'Inter', system-ui, sans-serif;
      font-size: 0.85rem;
    }

    .dev-nav-button.active {
      background-color: #f59e0b;
      font-weight: 600;
    }

    .hidden {
      display: none;
    }

    .chevron-icon {
      display: inline-block;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    const colors = {
      primary: '#00356b',
      sand: '#f5f1e8',
      earth: '#8b7355',
      earthLight: '#d4c4a8',
      earthDark: '#5c4d3d',
      accent: '#c9a227',
      clay: '#c4a574',
      clayLight: '#e8dcc8',
      clayDark: '#a08050',
      success: '#22c55e',
      successBg: '#f0fdf4',
      warning: '#f59e0b',
      warningBg: '#fffbeb',
      error: '#dc2626',
      errorBg: '#fef2f2',
    };

    const NFPTutorial2 = () => {
      const [phase, setPhase] = useState('welcome');
      const [devMode, setDevMode] = useState(false);
      const [headerClickCount, setHeaderClickCount] = useState(0);
      const [showGlossary, setShowGlossary] = useState(false);
      const [showAINote, setShowAINote] = useState(true);
      const [soundOn, setSoundOn] = useState(true);

      const playSuccessTone = () => {
        if (!soundOn) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const now = audioContext.currentTime;
          const notes = [261.63, 329.63, 392.0];
          notes.forEach((freq, i) => {
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.3, now + i * 0.1);
            gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.2);
            osc.start(now + i * 0.1);
            osc.stop(now + i * 0.1 + 0.2);
          });
        } catch (e) {
          // Silently fail if AudioContext is unavailable
        }
      };

      const playSoftNope = () => {
        if (!soundOn) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const now = audioContext.currentTime;
          [400, 300].forEach((freq, i) => {
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.2, now + i * 0.1);
            gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.15);
            osc.start(now + i * 0.1);
            osc.stop(now + i * 0.1 + 0.15);
          });
        } catch (e) {
          // Silently fail
        }
      };

      const playBuzzer = () => {
        if (!soundOn) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const now = audioContext.currentTime;
          const osc = audioContext.createOscillator();
          const gain = audioContext.createGain();
          osc.connect(gain);
          gain.connect(audioContext.destination);
          osc.type = 'sawtooth';
          osc.frequency.value = 150;
          gain.gain.setValueAtTime(0.3, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
          osc.start(now);
          osc.stop(now + 0.3);
        } catch (e) {
          // Silently fail
        }
      };

      const playContinueClick = () => {
        if (!soundOn) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const now = audioContext.currentTime;
          const osc = audioContext.createOscillator();
          const gain = audioContext.createGain();
          osc.connect(gain);
          gain.connect(audioContext.destination);
          osc.frequency.value = 600;
          gain.gain.setValueAtTime(0.2, now);
          gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
          osc.start(now);
          osc.stop(now + 0.1);
        } catch (e) {
          // Silently fail
        }
      };

      const [q1Answer, setQ1Answer] = useState('');
      const [q1Hints, setQ1Hints] = useState(0);
      const [q1Correct, setQ1Correct] = useState(false);

      const [q2Selected, setQ2Selected] = useState(null);
      const [q2Hints, setQ2Hints] = useState(0);
      const [q2Correct, setQ2Correct] = useState(false);

      const [q3Selected, setQ3Selected] = useState(null);
      const [q3Hints, setQ3Hints] = useState(0);
      const [q3Correct, setQ3Correct] = useState(false);

      const [q4Answer, setQ4Answer] = useState('');
      const [q4Hints, setQ4Hints] = useState(0);
      const [q4Correct, setQ4Correct] = useState(false);

      const [q5Selected, setQ5Selected] = useState(null);
      const [q5Hints, setQ5Hints] = useState(0);
      const [q5Correct, setQ5Correct] = useState(false);

      const handleHeaderClick = () => {
        const newCount = headerClickCount + 1;
        if (newCount === 3) {
          setDevMode(!devMode);
          setHeaderClickCount(0);
        } else {
          setHeaderClickCount(newCount);
        }
      };

      const SoundToggle = () => (
        <button
          onClick={() => setSoundOn(!soundOn)}
          style={{
            position: 'absolute',
            top: '16px',
            right: '16px',
            background: colors.sand,
            border: 'none',
            padding: '8px',
            borderRadius: '50%',
            cursor: 'pointer',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontSize: '20px',
            zIndex: 100,
          }}
          title={soundOn ? "Sound On" : "Sound Off"}
        >
          {soundOn ? 'üîä' : 'üîá'}
        </button>
      );

      const checkQ1 = () => {
        const cleaned = q1Answer.replace(/,/g, '').trim();
        if (cleaned === '62576168') {
          setQ1Correct(true);
          playSuccessTone();
        } else {
          playSoftNope();
          if (q1Hints < 2) {
            setQ1Hints(q1Hints + 1);
          } else {
            playBuzzer();
            setQ1Hints(3);
            setQ1Correct(true);
          }
        }
      };

      const checkQ2 = (option) => {
        setQ2Selected(option);
        if (option === 'A') {
          setQ2Correct(true);
          playSuccessTone();
        } else {
          playSoftNope();
          if (q2Hints < 2) {
            setQ2Hints(q2Hints + 1);
          } else {
            playBuzzer();
            setQ2Hints(3);
            setQ2Correct(true);
          }
        }
      };

      const checkQ3 = (option) => {
        setQ3Selected(option);
        if (option === 'B') {
          setQ3Correct(true);
          playSuccessTone();
        } else {
          playSoftNope();
          if (q3Hints < 2) {
            setQ3Hints(q3Hints + 1);
          } else {
            playBuzzer();
            setQ3Hints(3);
            setQ3Correct(true);
          }
        }
      };

      const checkQ4 = () => {
        const lowerAnswer = q4Answer.toLowerCase();
        const keyPhrases = [
          'reserves',
          'buildings',
          'illiquid',
          'restriction',
          'designation',
          'liquidity',
          'not an accounting term',
        ];
        const hasKeyPhrase = keyPhrases.some((phrase) => lowerAnswer.includes(phrase));

        if (hasKeyPhrase && q4Answer.trim().length > 30) {
          setQ4Correct(true);
          playSuccessTone();
        } else {
          playSoftNope();
          if (q4Hints < 2) {
            setQ4Hints(q4Hints + 1);
          } else {
            playBuzzer();
            setQ4Hints(3);
            setQ4Correct(true);
          }
        }
      };

      const checkQ5 = (option) => {
        setQ5Selected(option);
        if (option === 'B') {
          setQ5Correct(true);
          playSuccessTone();
        } else {
          playSoftNope();
          if (q5Hints < 2) {
            setQ5Hints(q5Hints + 1);
          } else {
            playBuzzer();
            setQ5Hints(3);
            setQ5Correct(true);
          }
        }
      };

      const phaseOrder = ['welcome', 'phase1', 'phase2', 'phase3', 'phase4', 'phase5', 'complete'];
      const progressSteps = ['Welcome', 'Q1', 'Q2', 'Q3', 'Q4', 'Q5', 'Complete'];
      const currentStepIndex = phaseOrder.indexOf(phase);
      const progressPercent = ((currentStepIndex + 1) / phaseOrder.length) * 100;

      const resetAllAnswers = () => {
        setQ1Answer('');
        setQ1Hints(0);
        setQ1Correct(false);
        setQ2Selected(null);
        setQ2Hints(0);
        setQ2Correct(false);
        setQ3Selected(null);
        setQ3Hints(0);
        setQ3Correct(false);
        setQ4Answer('');
        setQ4Hints(0);
        setQ4Correct(false);
        setQ5Selected(null);
        setQ5Hints(0);
        setQ5Correct(false);
        setPhase('welcome');
      };

      return (
        <div className="container">
          {/* Header with Progress Bar */}
          <header style={{ position: 'relative' }}>
            <SoundToggle />
            <div className="header-title" onClick={handleHeaderClick}>
              <h1>Net Asset Categories</h1>
              <p>Yale School of Management ‚Ä¢ NFP Financial Literacy</p>
            </div>
            {devMode && (
              <div className="dev-phase-buttons">
                {phaseOrder.map((p) => (
                  <button
                    key={p}
                    className={`dev-phase-button ${phase === p ? 'active' : ''}`}
                    onClick={() => setPhase(p)}
                  >
                    {p}
                  </button>
                ))}
              </div>
            )}
          </header>

          {/* Progress Bar */}
          <div className="progress-bar">
            <div className="progress-fill" style={{ width: `${progressPercent}%` }}></div>
          </div>

          {/* Top Action Bar */}
          <div className="top-action-bar">
            <button className="button" onClick={() => { window.location.href = 'index.html'; }}>
              üè† Home
            </button>
            <button className="button" onClick={() => setShowGlossary(!showGlossary)}>
              üìñ Glossary
            </button>
            <button
              className="button"
              onClick={() => {
                resetAllAnswers();
              }}
            >
              ‚Ü∫ Restart
            </button>
          </div>

          {/* Glossary Panel */}
          {showGlossary && (
            <div className="glossary-panel">
              <h3>Glossary</h3>
              <div className="glossary-grid">
                <div className="glossary-item">
                  <p>Board Designation</p>
                  <p>
                    A statement of intent by the board for specific uses of unrestricted resources ‚Äî NOT a binding restriction.
                  </p>
                </div>
                <div className="glossary-item">
                  <p>Donor Restriction</p>
                  <p>
                    A binding external constraint imposed by a donor on how contributions must be used.
                  </p>
                </div>
                <div className="glossary-item">
                  <p>Released from Restrictions</p>
                  <p>
                    A reclassification from With Donor Restrictions to Without Donor Restrictions when a donor's conditions are met.
                  </p>
                </div>
                <div className="glossary-item">
                  <p>Net Investment in Capital Assets</p>
                  <p>
                    Buildings, land, and equipment minus any related debt. Part of Without Donor Restrictions but illiquid.
                  </p>
                </div>
                <div className="glossary-item">
                  <p>Available for Programs</p>
                  <p>
                    The portion of unrestricted net assets remaining after board designations ‚Äî net assets where donor restrictions have been satisfied or never existed.
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* Main Content */}
          <div className="content">
            {/* Welcome Phase */}
            {phase === 'welcome' && (
              <div>
                <h2>Tutorial 2: Net Asset Categories</h2>
                <p>
                  In Tutorial 1, you learned that every nonprofit's balance sheet shows <strong>Net Assets</strong> ‚Äî the difference between assets and liabilities. In Tutorial 2, we zoom in on net assets and understand their two main categories:
                </p>
                <ul>
                  <li>
                    <strong>Without Donor Restrictions</strong> ‚Äî money the organization can use as leadership decides (but this
                    includes buildings, which aren't liquid)
                  </li>
                  <li>
                    <strong>With Donor Restrictions</strong> ‚Äî money that donors have restricted for specific purposes
                  </li>
                </ul>
                <p>
                  The key lesson: only <strong>donors</strong> can create binding restrictions. The board makes designations,
                  which are statements of intent ‚Äî not binding restrictions.
                </p>

                {/* AI Transparency Note */}
                <div className="ai-note">
                  <button onClick={() => setShowAINote(!showAINote)}>
                    <span>AI Transparency Note</span>
                    <span className="chevron-icon">{showAINote ? '‚ñ≤' : '‚ñº'}</span>
                  </button>
                  {showAINote && (
                    <p>
                      This tutorial is powered by AI. Rick2.0 is an AI tutor built on Claude by Anthropic. Rick2.0 can explain financial concepts, ask questions, and provide feedback ‚Äî but Rick2.0 is not a financial advisor and cannot replace qualified professionals. All content reflects accounting standards and nonprofit best practices, and you should always verify financial concepts with your instructor.
                    </p>
                  )}
                </div>

                <button
                  className="begin-button"
                  onClick={() => {
                    playContinueClick();
                    setPhase('phase1');
                  }}
                >
                  Begin ‚Ä∫
                </button>

                {devMode && (
                  <div className="dev-mode-notice">
                    <p>Dev Mode Active</p>
                    <p>Phase-skip buttons are shown in the header. Current phase: {phase}</p>
                  </div>
                )}
              </div>
            )}

            {/* Phase 1: Q1 */}
            {phase === 'phase1' && (
              <div>
                <h2>Question 1: The Three Sub-Categories</h2>
                <p>
                  Let's look at OHS's balance sheet. Within <strong>Net Assets Without Donor Restrictions</strong>, the notes
                  break down three sub-categories:
                </p>
                <div className="question-box">
                  <p>OHS Net Assets Without Donor Restrictions:</p>
                  <div className="sub-category">
                    <div className="sub-category-item">
                      <p>Available for Programs</p>
                      <p>$11,423,272</p>
                    </div>
                    <div className="sub-category-item">
                      <p>Board-Designated Endowment</p>
                      <p>$13,290,442</p>
                    </div>
                    <div className="sub-category-item">
                      <p>Net Investment in Capital Assets</p>
                      <p>$62,576,168</p>
                    </div>
                  </div>
                  <p className="total-line">(Total: $87,289,882)</p>
                </div>

                <p style={{ color: colors.earthDark, fontWeight: 600, marginBottom: '0.5rem' }}>
                  Question: What is the largest sub-category, and how much is it?
                </p>
                <p className="input-label">Enter the dollar amount (with or without commas):</p>

                <input
                  type="text"
                  value={q1Answer}
                  onChange={(e) => setQ1Answer(e.target.value)}
                  onKeyDown={(e) => { if (e.key === 'Enter' && !q1Correct) checkQ1(); }}
                  disabled={q1Correct}
                  placeholder="e.g., 62576168 or 62,576,168"
                  style={{
                    borderColor: q1Correct ? colors.success : colors.earthLight,
                    backgroundColor: q1Correct ? colors.successBg : 'white',
                  }}
                />

                {q1Correct && (
                  <div className="success-message">
                    <div className="success-icon">‚úì</div>
                    <div>
                      <p>Correct!</p>
                      <p>
                        <strong>Net investment in capital assets ‚Äî $62,576,168</strong> ‚Äî represents OHS's buildings, land,
                        and equipment minus any related debt. This is 72% of their unrestricted net assets. These resources
                        are 'unrestricted' in the accounting sense (no donor restrictions), but they're not liquid ‚Äî you
                        can't spend a building.
                      </p>
                    </div>
                  </div>
                )}

                {!q1Correct && (
                  <div>
                    <button className="check-button" onClick={checkQ1}>
                      Check Answer
                    </button>

                    {q1Hints > 0 && (
                      <div className={q1Hints === 3 ? 'error-message' : 'warning-message'}>
                        <div className={q1Hints === 3 ? 'error-icon' : 'warning-icon'}>
                          {q1Hints === 3 ? '‚ö†' : '‚ùì'}
                        </div>
                        <div>
                          <p>
                            {q1Hints === 1 && 'Hint 1:'}
                            {q1Hints === 2 && 'Hint 2:'}
                            {q1Hints === 3 && 'Final Hint:'}
                          </p>
                          <p>
                            {q1Hints === 1 &&
                              'Look at the three amounts: $11.4M, $13.3M, and $62.6M. Which is largest?'}
                            {q1Hints === 2 && 'Net investment in capital assets is $62,576,168.'}
                            {q1Hints === 3 &&
                              'Enter 62576168 (or 62,576,168). This is the net investment in capital assets.'}
                          </p>
                        </div>
                      </div>
                    )}
                  </div>
                )}

                {q1Correct && (
                  <button
                    className="next-button"
                    onClick={() => {
                      playContinueClick();
                      setPhase('phase2');
                    }}
                  >
                    Next ‚Ä∫
                  </button>
                )}
              </div>
            )}

            {/* Phase 2: Q2 */}
            {phase === 'phase2' && (
              <div>
                <h2>Question 2: Board Designations</h2>
                <p>
                  The OHS board has designated $13.3 million as an endowment. This means the board has <strong>internally
                  decided</strong> to set aside these funds and spend only the earnings, not the principal. But here's the
                  crucial question:
                </p>

                <p style={{ color: colors.earthDark, fontWeight: 600, marginBottom: '1rem', marginTop: '1.5rem' }}>
                  Can the board reverse this designation and use the money for something else?
                </p>

                <div style={{ display: 'grid', gap: '1rem', marginBottom: '1.5rem' }}>
                  <button
                    className="option-button"
                    onClick={() => checkQ2('A')}
                    disabled={q2Correct}
                    style={{
                      borderColor: q2Selected === 'A' && !q2Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q2Selected === 'A' && q2Correct ? colors.successBg : 'white',
                    }}
                  >
                    <p>A. Yes ‚Äî board designations are statements of intent</p>
                    <p>The board created it and can reverse it.</p>
                  </button>

                  <button
                    className="option-button"
                    onClick={() => checkQ2('B')}
                    disabled={q2Correct}
                    style={{
                      borderColor: q2Selected === 'B' && !q2Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q2Selected === 'B' && !q2Correct ? colors.errorBg : 'white',
                    }}
                  >
                    <p>B. No ‚Äî once designated, the funds are restricted</p>
                    <p>The designation becomes a permanent restriction.</p>
                  </button>
                </div>

                {q2Correct && (
                  <div className="success-message">
                    <div className="success-icon">‚úì</div>
                    <div>
                      <p>Correct!</p>
                      <p>
                        Board designations are statements of intent, not binding restrictions. The board created this
                        designation and can reverse it at any meeting. That's why board-designated amounts remain
                        classified as Without Donor Restrictions. Only <strong>donors</strong> can create restrictions that
                        the organization is legally obligated to honor.
                      </p>
                    </div>
                  </div>
                )}

                {!q2Correct && q2Selected && (
                  <div className="error-message">
                    <div className="error-icon">‚ö†</div>
                    <div>
                      <p>Not quite.</p>
                      {q2Hints > 0 && (
                        <p>
                          {q2Hints === 1 && 'Think about WHO created this designation. Was it a donor or the board?'}
                          {q2Hints === 2 &&
                            'Board designations remain in "Without Donor Restrictions." Only DONORS can create binding restrictions.'}
                          {q2Hints === 3 &&
                            'The correct answer is A. Board designations are statements of intent, not binding restrictions.'}
                        </p>
                      )}
                      {q2Hints === 0 && (
                        <button className="hint-button" onClick={() => setQ2Hints(1)}>
                          Show Hint
                        </button>
                      )}
                      {q2Hints > 0 && q2Hints < 3 && (
                        <button className="hint-button" onClick={() => setQ2Hints(q2Hints + 1)}>
                          Next Hint
                        </button>
                      )}
                    </div>
                  </div>
                )}

                {q2Correct && (
                  <button
                    className="next-button"
                    onClick={() => {
                      playContinueClick();
                      setPhase('phase3');
                    }}
                  >
                    Next ‚Ä∫
                  </button>
                )}
              </div>
            )}

            {/* Phase 3: Q3 */}
            {phase === 'phase3' && (
              <div>
                <h2>Question 3: Donor-Restricted Contributions</h2>
                <p>
                  A donor gives OHS $500,000 with a specific instruction: "This money must be used to build a new veterinary
                  surgical suite." This is a <strong>donor-imposed restriction</strong>.
                </p>

                <p style={{ color: colors.earthDark, fontWeight: 600, marginBottom: '1rem', marginTop: '1.5rem' }}>
                  Where is this contribution initially recorded?
                </p>

                <div style={{ display: 'grid', gap: '1rem', marginBottom: '1.5rem' }}>
                  <button
                    className="option-button"
                    onClick={() => checkQ3('A')}
                    disabled={q3Correct}
                    style={{
                      borderColor: q3Selected === 'A' && !q3Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q3Selected === 'A' && !q3Correct ? colors.errorBg : 'white',
                    }}
                  >
                    <p>A. Net Assets Without Donor Restrictions</p>
                    <p>The money is recorded as unrestricted.</p>
                  </button>

                  <button
                    className="option-button"
                    onClick={() => checkQ3('B')}
                    disabled={q3Correct}
                    style={{
                      borderColor: q3Selected === 'B' && !q3Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q3Selected === 'B' && q3Correct ? colors.successBg : 'white',
                    }}
                  >
                    <p>B. Net Assets With Donor Restrictions</p>
                    <p>The donor specified a purpose, creating a binding restriction.</p>
                  </button>
                </div>

                {q3Correct && (
                  <div className="success-message">
                    <div className="success-icon">‚úì</div>
                    <div>
                      <p>Correct!</p>
                      <p>
                        Because the donor specified the purpose (veterinary surgical suite), this creates a binding
                        restriction. The contribution is recorded in Net Assets With Donor Restrictions. It will be
                        'released from restrictions' ‚Äî reclassified to Without Donor Restrictions ‚Äî only when OHS builds
                        the surgical suite and satisfies the donor's condition.
                      </p>
                    </div>
                  </div>
                )}

                {!q3Correct && q3Selected && (
                  <div className="error-message">
                    <div className="error-icon">‚ö†</div>
                    <div>
                      <p>Not quite.</p>
                      {q3Hints > 0 && (
                        <p>
                          {q3Hints === 1 &&
                            'The donor specified HOW the money must be used. Does that create a restriction?'}
                          {q3Hints === 2 &&
                            'When a donor specifies a purpose, that creates a binding restriction that the organization must honor.'}
                          {q3Hints === 3 &&
                            'The correct answer is B. Donor-specified contributions go to With Donor Restrictions.'}
                        </p>
                      )}
                      {q3Hints === 0 && (
                        <button className="hint-button" onClick={() => setQ3Hints(1)}>
                          Show Hint
                        </button>
                      )}
                      {q3Hints > 0 && q3Hints < 3 && (
                        <button className="hint-button" onClick={() => setQ3Hints(q3Hints + 1)}>
                          Next Hint
                        </button>
                      )}
                    </div>
                  </div>
                )}

                {q3Correct && (
                  <button
                    className="next-button"
                    onClick={() => {
                      playContinueClick();
                      setPhase('phase4');
                    }}
                  >
                    Next ‚Ä∫
                  </button>
                )}
              </div>
            )}

            {/* Phase 4: Q4 */}
            {phase === 'phase4' && (
              <div>
                <h2>Question 4: Critical Thinking</h2>
                <p>
                  Someone on OHS's board says: "We have $87 million in <strong>reserves</strong> ‚Äî the organization is in
                  great financial shape."
                </p>

                <p style={{ color: colors.earthDark, fontWeight: 600, marginBottom: '1rem', marginTop: '1.5rem' }}>
                  Using what you've learned about net asset categories, explain what's misleading about this statement.
                </p>

                <textarea
                  value={q4Answer}
                  onChange={(e) => setQ4Answer(e.target.value)}
                  onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey && !q4Correct) { e.preventDefault(); checkQ4(); } }}
                  disabled={q4Correct}
                  placeholder="Your explanation here (minimum 30 characters)..."
                  style={{
                    borderColor: q4Correct ? colors.success : colors.earthLight,
                    backgroundColor: q4Correct ? colors.successBg : 'white',
                  }}
                ></textarea>

                {q4Correct && (
                  <div className="success-message">
                    <div className="success-icon">‚úì</div>
                    <div>
                      <p>Excellent!</p>
                      <p>
                        Several things are misleading. First, "reserves" is not an accounting term ‚Äî it implies a pool of
                        segregated, spendable money. Second, $62.6 million of that $87 million is invested in buildings and
                        land ‚Äî you can't spend buildings. Third, the net asset category tells you about donor restriction
                        status, not about whether the money is available. To understand actual financial flexibility, you
                        need the liquidity footnote (which we'll explore in Tutorial 5).
                      </p>
                    </div>
                  </div>
                )}

                {!q4Correct && (
                  <div>
                    <button className="check-button" onClick={checkQ4}>
                      Check Answer
                    </button>

                    {q4Hints > 0 && (
                      <div className={q4Hints === 3 ? 'error-message' : 'warning-message'}>
                        <div className={q4Hints === 3 ? 'error-icon' : 'warning-icon'}>
                          {q4Hints === 3 ? '‚ö†' : '‚ùì'}
                        </div>
                        <div>
                          <p>
                            {q4Hints === 1 && 'Hint 1:'}
                            {q4Hints === 2 && 'Hint 2:'}
                            {q4Hints === 3 && 'Hint 3:'}
                          </p>
                          <p>
                            {q4Hints === 1 &&
                              'Consider: What is "reserves"? Is it an accounting term? What does the $87M actually include?'}
                            {q4Hints === 2 &&
                              'Hint: $62.6 million of that $87M is in buildings and land. Can you spend a building?'}
                            {q4Hints === 3 &&
                              'Mention that "reserves" is misleading terminology, that $62.6M is in capital assets (illiquid), and that restriction status ‚â† liquidity.'}
                          </p>
                        </div>
                      </div>
                    )}
                  </div>
                )}

                {q4Correct && (
                  <button
                    className="next-button"
                    onClick={() => {
                      playContinueClick();
                      setPhase('phase5');
                    }}
                  >
                    Next ‚Ä∫
                  </button>
                )}
              </div>
            )}

            {/* Phase 5: Q5 */}
            {phase === 'phase5' && (
              <div>
                <h2>Question 5: Released from Restrictions</h2>
                <p>
                  OHS receives a $500,000 donation restricted to building the veterinary surgical suite (as we discussed in
                  Question 3). When OHS completes the suite and satisfies the donor's condition, the funds are "released from
                  restrictions" ‚Äî reclassified from With Donor Restrictions to Without Donor Restrictions.
                </p>

                <p style={{ color: colors.earthDark, fontWeight: 600, marginBottom: '1rem', marginTop: '1.5rem' }}>
                  What happens to total Net Assets?
                </p>

                <div style={{ display: 'grid', gap: '1rem', marginBottom: '1.5rem' }}>
                  <button
                    className="option-button"
                    onClick={() => checkQ5('A')}
                    disabled={q5Correct}
                    style={{
                      borderColor: q5Selected === 'A' && !q5Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q5Selected === 'A' && !q5Correct ? colors.errorBg : 'white',
                    }}
                  >
                    <p>A. Total Net Assets increases</p>
                    <p>New money comes in when restrictions are released.</p>
                  </button>

                  <button
                    className="option-button"
                    onClick={() => checkQ5('B')}
                    disabled={q5Correct}
                    style={{
                      borderColor: q5Selected === 'B' && !q5Correct ? colors.warning : colors.earthLight,
                      backgroundColor: q5Selected === 'B' && q5Correct ? colors.successBg : 'white',
                    }}
                  >
                    <p>B. Total Net Assets stays the same</p>
                    <p>It's a reclassification, not new money.</p>
                  </button>
                </div>

                {q5Correct && (
                  <div className="success-message">
                    <div className="success-icon">‚úì</div>
                    <div>
                      <p>Correct!</p>
                      <p>
                        Released from restrictions is a reclassification, not new money. The amount moves from "With Donor
                        Restrictions" to "Without Donor Restrictions," but total Net Assets doesn't change. It's like moving
                        money between bank accounts ‚Äî the total stays the same, but the categorization changes.
                      </p>
                    </div>
                  </div>
                )}

                {!q5Correct && q5Selected && (
                  <div className="error-message">
                    <div className="error-icon">‚ö†</div>
                    <div>
                      <p>Not quite.</p>
                      {q5Hints > 0 && (
                        <p>
                          {q5Hints === 1 &&
                            'Think about what "released from restrictions" means. Is new money coming in, or is existing money being reclassified?'}
                          {q5Hints === 2 &&
                            '"Released from restrictions" moves an amount FROM With Donor Restrictions TO Without Donor Restrictions. It\'s a reclassification within net assets.'}
                          {q5Hints === 3 && 'The correct answer is B. Total Net Assets stays the same.'}
                        </p>
                      )}
                      {q5Hints === 0 && (
                        <button className="hint-button" onClick={() => setQ5Hints(1)}>
                          Show Hint
                        </button>
                      )}
                      {q5Hints > 0 && q5Hints < 3 && (
                        <button className="hint-button" onClick={() => setQ5Hints(q5Hints + 1)}>
                          Next Hint
                        </button>
                      )}
                    </div>
                  </div>
                )}

                {q5Correct && (
                  <button
                    className="next-button"
                    onClick={() => {
                      playContinueClick();
                      setPhase('complete');
                    }}
                  >
                    Finish ‚Ä∫
                  </button>
                )}
              </div>
            )}

            {/* Complete Phase */}
            {phase === 'complete' && (
              <div className="completion-container">
                <div className="trophy">üèÜ</div>
                <h2>Tutorial Complete!</h2>
                <p style={{ fontSize: '1.1rem', lineHeight: 1.6, color: colors.earth }}>
                  You've mastered the fundamentals of net asset categories in nonprofit financial statements.
                </p>

                <div className="completion-box">
                  <h3>What You Discovered:</h3>
                  <ol>
                    <li>The three sub-categories within Without Donor Restrictions and what each represents (Available for Programs, Board-Designated Endowment, Net Investment in Capital Assets)</li>
                    <li>Board designations are statements of intent ‚Äî the board can change its mind</li>
                    <li>Only DONORS can create binding restrictions</li>
                    <li>"Reserves" is not an accounting term and is misleading</li>
                    <li>"Released from restrictions" is a reclassification, not new money</li>
                  </ol>
                </div>

                <div className="next-tutorial-box">
                  <h3>Coming Next:</h3>
                  <p>
                    <strong>Tutorial 3 ‚Äî Statement of Activities</strong><br />
                    How net assets CHANGE over a period. You'll learn how revenues, expenses, and reclassifications flow
                    through the statement to explain year-over-year changes in net assets.
                  </p>
                </div>

                <div className="button-group">
                  <button
                    className="button outline"
                    onClick={() => { window.location.href = 'NFP-Tutorial-1-Financial-Position.html'; }}
                  >
                    ‚Üê Previous Tutorial
                  </button>
                  <button
                    className="button accent"
                    onClick={() => {
                      window.location.href = 'NFP-Tutorial-3-Statement-of-Activities.html';
                    }}
                  >
                    Next Tutorial ‚Ä∫
                  </button>
                  <button
                    className="button outline"
                    onClick={() => {
                      resetAllAnswers();
                    }}
                  >
                    Restart
                  </button>
                </div>
              </div>
            )}
          </div>

          {/* Dev Mode Navigator */}
          {devMode && (
            <div className="dev-navigator">
              <p>Dev Navigator</p>
              <div className="dev-nav-grid">
                {phaseOrder.map((p) => (
                  <button
                    key={p}
                    className={`dev-nav-button ${phase === p ? 'active' : ''}`}
                    onClick={() => setPhase(p)}
                  >
                    {p}
                  </button>
                ))}
              </div>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NFPTutorial2 />);
  </script>
</body>
</html>
